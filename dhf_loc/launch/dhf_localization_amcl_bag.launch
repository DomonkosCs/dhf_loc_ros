<launch>
  <arg name="map_name" default="gt_map_01_table"
    doc="Name of the map yaml file without extension, contained in the assets folder." />
  <arg name="bag" default="" />
  <arg name="mc" default="1" />
  <arg name="model" default="$(env TURTLEBOT3_MODEL)" doc="model type [burger, waffle, waffle_pi]" />
  <arg name="info" default="" />
  <arg name="result_export_file_name" default="amcl_$(arg info)_mc$(arg mc)_$(arg bag)" />


  <param name="/use_sim_time" value="true" />

  <include file="$(find turtlebot3_bringup)/launch/turtlebot3_remote.launch">
    <arg name="model" value="$(arg model)" />
  </include>

  <node name="map_server" pkg="map_server" type="map_server" output="screen"
    args="$(find dhf_loc)/assets/$(arg map_name).yaml" />

  <include file="$(find turtlebot3_navigation)/launch/amcl.launch">
    <arg name="selective_resampling" value="true" />
    <arg name="update_min" value="0" />
    <!-- <arg name="initial_pose_x" value="-6.598" />
    <arg name="initial_pose_y" value="1.699" />
    <arg name="initial_pose_a" value="-1.644" /> -->
  </include>


  <!-- -s 543 -u 75 -->
  <node name="rosbag" pkg="rosbag" type="play" output="screen" required="true"
    args="--clock -d 3 $(find dhf_loc)/assets/bags/$(arg bag).bag " />

  <node name="robot_pose_publisher" pkg="robot_pose_publisher" type="robot_pose_publisher">
    <param name="is_stamped" value="true" />
    <param name="publish_frequency" value="5" />
  </node>

  <node pkg="dhf_loc" type="localization_result_exporter_node.py"
    name="localization_result_exporter_node"
    output="screen">
    <param name="export_file_name" value="$(arg result_export_file_name)" />
  </node>


  <!-- <node pkg="rviz" type="rviz" name="rviz"
    args="-d $(find turtlebot3_navigation)/rviz/turtlebot3_navigation.rviz" /> -->

</launch>